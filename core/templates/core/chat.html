{% extends 'core/base.html' %}
{% block content %}
  <h2>Chat</h2>
  <form method="post">
    {% csrf_token %}
    <textarea name="question" rows="3" style="width:100%;">{{ request.POST.question }}</textarea><br>
    <button type="submit">Ask</button>
  </form>

  {% if error %}
    <div class="error">Error: {{ error }}</div>
  {% endif %}

  {% if sql %}
    <h3>Generated SQL:</h3>
    <pre>{{ sql }}</pre>
  {% endif %}

  {% if response %}
    <h3>Results:</h3>
    <div class="chat-results">
      {% for row in response %}
        <div class="chat-row">{{ row }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
